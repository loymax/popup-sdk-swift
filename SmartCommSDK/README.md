# Swift5 API client for SmartCommSDK

Описание методов для работы с пушами

## Overview
This API client was generated by the [OpenAPI Generator](https://openapi-generator.tech) project.  By using the [openapi-spec](https://github.com/OAI/OpenAPI-Specification) from a remote server, you can easily generate an API client.

- API version: 1.0.0
- Package version: 
- Generator version: 7.10.0
- Build package: org.openapitools.codegen.languages.Swift5ClientCodegen

## Installation

### Carthage

Run `carthage update`

### CocoaPods

Run `pod install`

## Documentation for API Endpoints

All URIs are relative to *https://smcmaster-api.smc.nsk-k8s.loymax.net*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*AuthorizationAPI* | [**generateAccessToken**](docs/AuthorizationAPI.md#generateaccesstoken) | **POST** /token | Авторизация в системе SMC
*CommunicationAPI* | [**logPushEvent**](docs/CommunicationAPI.md#logpushevent) | **POST** /communication/{type}/events | Передать в Смарт факт показа (открытия) пуша
*CustomerAPI* | [**addCustomerContactToken**](docs/CustomerAPI.md#addcustomercontacttoken) | **POST** /customer/{id}/contact | Передать в Смарт полученный от APNS/FCM/rustore/HuaweiPushToolkit токен
*CustomerAPI* | [**getCustomerNotificationStatus**](docs/CustomerAPI.md#getcustomernotificationstatus) | **GET** /customer/{id}/channel | Получить из Смарта статус разрешения на уведомления клиенту
*CustomerAPI* | [**getCustomerSubscriptionCategories**](docs/CustomerAPI.md#getcustomersubscriptioncategories) | **GET** /customer/{id}/subscribe | Получить из Смарта статус подписки клиента на категории рассылок
*CustomerAPI* | [**modifyCustomerSubscriptionCategories**](docs/CustomerAPI.md#modifycustomersubscriptioncategories) | **PATCH** /customer/{id}/subscribe | Передать в Смарт статус подписки на категории
*CustomerAPI* | [**setCustomerNotificationStatus**](docs/CustomerAPI.md#setcustomernotificationstatus) | **POST** /customer/{id}/channel | Передать в Смарт статус разрешения на уведомления клиенту


## Настройка

### Базовый URL

В AppDelegate.swift добавьте:

```swift
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
    SmartCommSDKAPI.basePath = "your_base_path"
    return true
}
```

### Авторизация

Перед использованием методов необходимо установить токен авторизации:

```swift
SmartCommSDKAPI.customHeaders = [
    "Authorization" : "Bearer YOUR_TOKEN", // Токен можно получить через /token
    "Accept" : "application/json",
    "Content-Type": "application/json"
]
```

## Примеры использования

### Авторизация

```swift
let attributes = GenerateAccessTokenRequestDataAttributes(username: "login", password: "password")
let data = GenerateAccessTokenRequestData(attributes: attributes)
let request = GenerateAccessTokenRequest(data: data)

SmartCommSDKAPI.AuthorizationAPI.generateAccessToken(generateAccessTokenRequest: request) { result, error in
    if let token = result?.data?.attributes?.accessToken {
        SmartCommSDKAPI.customHeaders = [
            "Authorization" : token,
            "Accept" : "application/json",
            "Content-Type": "application/json"
        ]
    }
}
```

### Получение статуса подписок

```swift
SmartCommSDKAPI.CustomerAPI.getCustomerSubscriptionCategories(id: "clientId") { response, error in
    if let attributes = response?.data?.first?.attributes {
        let subscriptions = [
            "email": attributes.statusEmail == "Y",
            "sms": attributes.statusSms == "Y",
            "push": attributes.statusPush == "Y"
        ]
    }
}
```

### Изменение статуса подписки

```swift
let mailingCode = ModifyCustomerSubscriptionCategoriesRequestDataAttributesCategoriesMailingCode(
    email: "Y",  // Y - подписан, N - не подписан
    sms: "N",
    push: "Y"
)

let categories = ModifyCustomerSubscriptionCategoriesRequestDataAttributesCategories(mailingCode: mailingCode)
let attributes = ModifyCustomerSubscriptionCategoriesRequestDataAttributes(categories: categories)
let requestData = ModifyCustomerSubscriptionCategoriesRequestData(attributes: attributes)
let request = ModifyCustomerSubscriptionCategoriesRequest(data: requestData)

SmartCommSDKAPI.CustomerAPI.modifyCustomerSubscriptionCategories(
    id: "clientId",
    modifyCustomerSubscriptionCategoriesRequest: request
) { response, error in
    // Обработка ответа
}
```

## Доступные API методы

- AuthorizationAPI
  - generateAccessToken - Авторизация в системе SMC

- CustomerAPI
  - getCustomerSubscriptionCategories - Получение статуса подписок
  - modifyCustomerSubscriptionCategories - Изменение статуса подписок
  - getCustomerNotificationStatus - Получение статуса уведомлений
  - setCustomerNotificationStatus - Установка статуса уведомлений
  - addCustomerContactToken - Добавление токена для push-уведомлений

- CommunicationAPI
  - logPushEvent - Логирование событий push-уведомлений



<a id="documentation-for-authorization"></a>
## Documentation For Authorization


Authentication schemes defined for the API:
<a id="bearerAuth"></a>
### bearerAuth

- **Type**: HTTP Bearer Token authentication (JWT)


# How do I migrate from the Swift 5 generator to the swift 6 generator?

https://openapi-generator.tech/docs/faq-generators#how-do-i-migrate-from-the-swift-5-generator-to-the-swift-6-generator

### How do I implement bearer token authentication with URLSession on the Swift 5 API client?

https://openapi-generator.tech/docs/faq-generators#how-do-i-implement-bearer-token-authentication-with-urlsession-on-the-swift-5-api-client

## Author
